morning everybody david shapiro here um i have been taking a break from making youtube videos uh primarily because i'm working on writing my books um uh but anyways the uh inflation reduction act just came out and um i wanted to look at it so i downloaded it i downloaded the whole thing it's right here um it is let's see uh 15 000 lines long 835 000 characters 730ish pages in the pdf uh yeah so um that's what i got and i'm feeding it through my recursive summarizer which i made a video about this before um i summarized the recent roe v wade decision um and then i also summarized alice in wonderland down to 55 characters so anyways as a reminder it's pretty simple all it does is it uses a python module called text wrap and it breaks it into 2000 character long chunks and then for each chunk it summarizes it and then what you can do is then you take that summary and then you feed it back in and so what i'm doing it right now this is the first pass is i'm taking those 2000 character chunks and writing concise summaries so let me show you the um the prompts that i use so the prompt is super simple it just says write a concise summary of the following summary and then concise summary so by wrapping it in those instructions you get very consistent results especially with um with uh the instruct series of gpd3 again here's the input so the output will look like this it'll take let's see 800 thousand characters divided by two thousand that's forty if i'm doing my math correct um let's see eight hundred thousand characters divided by two thousand four hundred okay uh so it'll take four four hundred recursions but it will also drastically reduce the length so what we'll do is once this is done i'll do it again and i'll show you so anyways i'm going to pause the video wait for this to finish then we'll do the follow-up the follow-up ones one thing that i added to make it easier is that i added a timestamp to the output which means that i don't have to like rename the files manually it'll just put them out automatically so instead of the output here it'll be output then with the time stamp so they'll all be in sequential order anyways i'm going to pause the video we'll come back once we once we get the uh next phase done um yeah i wanted to just kind of walk you through kind of what i'm seeing um there's a lot of tax credits in this uh just watching some of these roll through um there's renewable energy tax credits there's extensions of older tax credits um let's see let me drag this up a little bit um energy audit tax credit 15 energy star criteria um i mean this is very comprehensive there's a lot of stuff in here um so you know sure i'm when you're summarizing something and i don't you know i don't i'm not a policy expert i'm sure there's stuff that's that's missing or um hidden or whatever but i mean you see tax credit tax credit tax credit i'll do a control f a search and just look at how many tax credits um are listed in this uh but this seems like it is very comprehensible like it is what it says that it is um there is also a lot on medicare um and medicine and and other things but it like so for instance in this section you know social security act social security act um amendments to the social security act uh medicare coverage vaccines low-income subsidies right there's obviously i haven't looked at this comprehensively um but you know i'm not seeing anything out of the ordinary yet not like oh hey we're also going to dedicate you know like 15 billion dollars to like ufo research or something but there might be um anyways so yeah i just wanted to kind of make that observation as it's going all these files will be available on the um on the github repo once this is done okay gang the first pass is done um it will be saved up in the repo here ira underscore 2022 166 etcetera etcetera that's just the time stamp um but let me show you so the input was here um 835 000 lines or characters fifteen thousand six hundred lines um now it is down to a hundred and seventy two thousand characters uh 793 lines um that's still about thirty six thousand words i think um yeah thirty six thousand five hundred ninety five words on average probably a little bit less because the average word length is uh much longer here than in like fiction but anyways so this is obviously still not sustainable um so let's go ahead and plug this back in and then we'll rerun it so i i added a little bit more output for the uh for the script so you can see how long you've got left so let me show you recursively summarize so this should take yep 87 so the senate passed a bill etc etc so now we're going to get the second second pass anyways so let's see what did i say like tax credit so find all in current document so there are 77 tax credits listed in this one um so that's interesting um there's all kinds of stuff from like stuff for the national park service there's epa clean air act right gas air pollution implementation there's all kinds of like let's see if there's electric vehicle let's see find all in current documents so electric vehicles are mentioned four different times um electric vehicles and fuel cell vehicles uh capped at 7 500. uh you know there's that kind of stuff let's see if it mentions insulin yep the bilamins the patient protection and affordable care act to treat cost sharing for covered insulin um there you go so there's all this kind of fun stuff solar solar is mentioned a whole bunch of times find all in current document 23 hits um yep so there you go um this should be going a bit faster um so this is one thing is as you recursively summarize it gets more and more condensed um so we're at uh stage 19 20 out of 87 so this will only take a few more minutes um and it'll all again it'll all be saved so i'll just pause the video again and i'll run this a couple more times and just show you that you can look through each each iteration yourself all right we're making making some good progress we've got um the second run get got it down to 87 sections um so we went to uh we went down to just shy of 60 000 characters 173 lines this down from almost 800 that it was just a moment ago um we see that you know it's getting kind of you know a little bit more concise although some of these summaries are very long it's interesting because i asked it to write a concise summary um but it's doing anything but so we'll see it might we might get so what often happens is you get to a point of diminishing returns um so we'll see what happens uh let's see mate wanted to just check on one thing yeah okay all right so let's run it again do a quick cls recursively summarize uh 1 out of 30. so this is only going to take 30 cycles to pass we'll see how far it gets and we'll be back in just a moment okay we just finished the third pass probably don't need to pause it again after this but i just wanted to show you what it looks like so this is this is a manageable chunk like if you wanted to spend you know 10 20 minutes reading this you probably could um you know you do lose you do lose uh resolution but you still get kind of a high level overview you know energy policy act of 2005 social security act patient protection and affordable care act um tax cuts and jobs clean air act energy audit so you kind of get a pretty big survey of what this is talking about so let's run this again so we're down to 22 000 characters um so we'll set let me just show you what this well here let me get this running i'll show you what it looks like okay um yeah so the first pass took it down to 169 kilobytes second down to 59 kilobytes third down to 22 kilobytes um and in this case uh we're down to 12 12 passes one thing that you can do let me just this won't take that long to run one thing that you can do is you can change the size of the chunk here let me zoom in a little bit you can change the chunk size so i have 2 000 characters if you want more granular interpretations you can do 1000 characters you can also change the prompt so you can say you can switch this to detailed instead of concise however one thing is when you're going from a huge document down to smaller you want to stay concise so that you get a better reductionality or dimensionality reduction so this will be done in just a second and of course you see like it goes faster and faster the first pass took over 400 the second one took 87 and now we're down to 12. um okay so output this one we'll do ira underscore 2022 so we'll open this up um yep so much much shorter the senate has passed a bill that would amend the internal revenue code etc etc medicare part b and d patient protection so it's again it says the same things just more concisely climate resiliency and livable communities act all very interesting stuff i think i'll call it at this because any smaller well actually no why not it's only going to take a few more tokens um so let's go ahead and just make this as small as possible to see what see what uh see what it comes up with we're down to 8 000 characters long recursively summarize so the last pass was 12 this one should be probably eight or nine so we're not getting that much more uh summarization just because these chunks are are big uh one of four okay oh right i did them i did my math wrong um yeah so we'll get it down to you know do a couple more passes until it just is in one paragraph and we'll see see what we think about it and then we'll look for the output here in just a second there you go okay so we're down to six kilobytes and obviously it's impossible like when you summarize something you lose information so we should not expect this to be remotely like representative but now we got it down to one page uh 5800 characters all right i think i'll stop here because we're gonna we're gonna be losing so much fidelity that it's not gonna be useful um but yeah so there you have it uh senate passes a bill uh foreign tax credits medicare limit out-of-pocket thresholds um energy securities act uh energy policy act clean air act yep so there you have it um we've got it nice and summarized uh let's see we did this in 12 minutes at least from your perspective um yeah i hope you found this useful uh you saw that like there's not a whole lot of like crazy stuff in this it's it doesn't look like it's trying to you know change everything it's just a huge comprehensive bill so anyways thanks for watching