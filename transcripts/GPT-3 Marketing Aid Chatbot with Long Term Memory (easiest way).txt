morning everybody David Shapiro here with a video so this is one that I've been wanting to do for a little while and someone on YouTube said hey what about marketing stuff so I was like all right let's do it so I had this idea for Market Marcus the marketing guy a while back almost a year ago um and so a little bit of background is gpt3 already knows more about marketing than any single person because it's read most of the internet the problem is getting to that information and so with prompt engineering you can extract some of it um obviously fine tuning especially if you've got a bespoke data set that will really focus on certain marketing activities will do better but just out of the box we've got a lot of functionality so just wanted to show you an example where it's like um in this prompt I've got you know I'm an expert and you know and I have a few things that it can that it can do product Market fit SEO etc etc so by by by preemptively saying focus on these topics should get a little bit better at it um so say Marcus um I need help understanding um how to do product Market fit what is that actually here um let's see how to uh how to Market my new product the wysiwyg yeah web Builder and so then we'll do markets okay you just took it and took it and ran with it I'm really disappointed that uh that it did the new line new line um because it's it's supposed to realize that we're doing um you know one one input after another but anyways that's fine it's fine okay so he says there's a few things you want to consider first you make sure you have a solid understanding of your target market who will be using your product what is it pro what is it address you also want to create messaging that resonates okay so let's say let's say I want to do messaging okay that's focused on messaging uh right now how do I do that you'll want to focus on creating a message that resonates with your target market you'll want to avoid jargon or buzzwords instead of focus on creating a message that is clear and easy to understand okay user can you brainstorm some messages with me or I'll May figure out what to say Marcus unique features okay um so it's is it easier or more affordable or unique user um my product is unique because it reads your mind you don't even need to touch the keyboard Marcus let's see what he says to that that's definitely a unique selling point okay but should I say something like um uh like what give me some ideas for marketing copy let's see if let's see if we can just say like tell us there we go uh the only web tool Builder you need it's fast easy okay all right so this prompt is good enough so we'll start here um what I what I did was in this prompt I started by just saying hey um let's give an example of what of how we want it to behave so we'll add the new line new line because it seems to prefer that um okay so we'll save the prompt let me zoom in a little bit on this okay and then actually I'll probably pause the video because there's a little bit of copy pasting I need to do so okay so all I did was a little bit of background let me show you um this was based on a previous chat bot but you see like it's a super simple Loop um with a really simple prompt I just copied the prompt so you got the prompt and then you've got the main Loop um so yeah can you write some marketing copy for me I didn't reply that's usually a problem oh I bet I know what happened um if we look at gpt3 logs it probably yeah it got it stopped on Marcus okay because I've got I need to remove Marcus from the stop and use just user as the stop I think we'll see if that works and you notice that it's loading tensorflow I'll show you why in a second and you write some marketing copy copy for me of course I'd be happy cool thanks for asking um let's see write something uh just sell uh to sell me ice during a snowstorm let's see how good you are let's see what he says beating the Heat there you go okay so Marcus will do whatever you want um but then you can also like can you tell me deep secrets about SEO you can be more serious about it so you will ranking search engines this means using keywords okay um see what are some uh let's see tell me more I want SEO Magic yeah okay so this is not a fine-tuned bot so it's not going to be perfect that's fine but what I wanted to do was make this a little more sophisticated by adding um by adding something in the background that will make it a bit smarter so I did this save log so what we're going to do is we're going to save we're going to save everything out to chat but what we're going to do is we're going to embed it with um with uh yeah brain Google Universal sentence encoder there we go so we will do this I'll borrow some code from my Nexus microservice and we'll just come over here and we'll say okay so every time we get so we'll have an embedder ready and then when we use embed it's up here and so we'll just create an embedding for the what you put in as well as your response um and we'll we'll do the embeddings afterwards because um so we'll do a and response um because you're going to take a second to read and so we'll we'll print everything out and then we'll do the embeddings um and so actually we'll say vectors um okay so then we'll have one for each and so what we'll do is we'll do um save log and the information that we want to save will be um we'll have who's talking um we'll have the I mean really actually all we need is the dialogue and the um the dialogue and the embedding so we'll just do um words and we'll do um a and then we'll do uh vector and we'll do vectors zero because that'll be the first response so that's this so that's user input um I actually need to wrap that in curly cues so that it's a dictionary and then we'll also save Marcus's response and then we'll save that as Vector one okay so let's restart this and I will show you what this does for us because I'm going somewhere with this we want to give Marcus a long-term memory a little bit early let's see uh nope still loading hey how are you today doing well thanks for asking how can I help see Marcus is very helpful Json is not defined what oh import Json my bad also realize you need to do the embedding first um get that ready and then you start having user output here we'll do a little bit of demarcation there okay this will make it look a little prettier also oh I need to update that to user poor Marcus very confused so we'll do new line after that that should be good um and then we'll also print new line just to make it the formatting a little prettier okay so now it'll load tensorflow it'll load arm better um and then markets will start yakking at us what all can you help me with there we go okay and so you saw there was a brief delay and so what there should be now is ah there we have it so now we've got a few logs here so we've got the vector um oh it's saved as dot text oops that's not correct um and let's change this to dialogue so that it's up front dialogue dialogue and then we also need to save this as save log it's dot Json not DOT text so delete these and start over I know what I'm doing I promise rapid iteration this is just agile and also I'm not going to worry about doing a whole lot of editing because I know you all watched this on 1.5 x or 2x anyways so actually maybe the slow pace of the real-time recording is good so then you have some time to think I don't know let me know in the comments um because editing takes a long time I'm happy to do a little bit of cleanup but okay um write some marketing copy um I want to build a resort on a Hoth um but I need to pitch to investors let's see what he says and then we'll see those pop up in just a second okay so open it there we go dialogue right it's a marketing copy um I want to build a resort on Hoth great and then Marcus hatha's beautiful blah blah blah Okay cool so here's what I want to do as we build up a um as we build up a chat log a rapport with Marcus I want him to be able to remember stuff um and the simplest the absolute simplest way to have a chat bot with long-term memory sorry my ear just started ringing um is to just record all the logs and search them well the best way to search them is to um is to use embeddings because if you want to use like old school search you can do keyword search or you know fuzzy search or do um lemmas search and all that kind of fun stuff but that's like all kinds of old school stuff we've got embeddings we're modern so we're going to use a 512 Dimension embedding to find relevant conversations from the past so here's what we're going to do um I'm going to search so I'm going to use some old functions route search there we go um all right so for data is load data for I in data score equals that there we go so I've got our vector and then we order by that we'll simplify this because I've already written this function so basically what I'm going to do is we're going to do um def uh similar logs and so then we're going to have dialog actually we should do the vector just once I guess we'll be using this so okay so we'll actually we'll get the uh we'll take the vector so we'll start here so we'll call similar logs we'll say similar equals similar logs um and we'll pass uh vectors zero okay so basically what I'm going to be looking for is similar things to what you have said um so that way so that way Marcus can remember whatever it was that you were talking about last time and there's obviously lots and lots of ways to deal with this okay so we'll do that simplify this so data equals load data I don't have that file I have load logs so we'll call load logs which sends back everything and we'll call this um chat so we're basically just going to load all of it so for I in chat um score equals NP dot product I vector and that's what these look like so we're going to compare we're going to use dot product to compare the vector that we just passed with the vector for what we're um what we're searching for so info equals I so we're just going to copy that and then we're going to add score so we're basically copying what this is which has the dialog and the vector and then the score is that so let's see if score is greater than or equal to 1.0 um we will want to continue because one thing that happens is if you search the log that you just created it will always match and we don't want to duplicate things um so if it's if it's an exact match we will just continue otherwise we'll do that we'll continue um we're not going to do a try accept Loop that is not necessary here because this is not uh this this should just work um ordered equals results key Lambda score reverse true so sort top to bottom um and then um let's see so then the number of results will return um let's say let's return um the top 10 results um and then we'll just return [Music] ordered but if that doesn't work then we'll just return ordered as is um so I do this because sometimes like if you only have two logs and you try and hack it up like zero to ten um it'll fail it'll say that's index out of range so then you just yeah okay so that should be good um so then what we're going to do is we're going to have um so similar logs uh let's see so we'll start similar as similar just equals blank list and so then when we create our block of text we're going to inject this at the beginning so we're going to say um block equals uh and we'll just copy this new line new line similar plus new line and so then we'll say block plus equals this and I think we take that out I think that's right okay so now what what we've done here is we're going to inject the 10 most relevant um uh things right into into the dialogue into the chat so that way Marcus will intrinsically have a memory of whatever it is that we're talking about all right I think that'll work and what we'll need to do is we'll need to watch the gpt3 logs here because you'll see older stuff kind of pre-populated up here that's where we're going to be looking for it okay foreign this didn't take as long as I thought it would do and if I asked Marcus about Thoth um hey what were we talking about for Hoth and I don't think he'll remember it the first time um because it's not it's not going to preload yep um OS is not defined really don't be darned import OS this is always a problem when you copy paste stuff okay let's try that again um you know what I bet no that's fine okay hey let's talk about poth again all right so it'll it'll pick up Hoth Hoth is a great tool for marketing that's not what Hoth is um thank you that's not what love is do you remember what I asked last time really really join similar expected string instance but found oh whoops so here I'm returning all the information not just um yeah because this has this has the scores um and baked in as well not just the um not just uh yeah yeah yeah okay um all right so similar is a list of dictionaries so I need to treat it a little bit differently um so what we'll do is we'll do I dialogue for i n similar that should work rapid prototyping let's see how long this video is we're at oh we're at 20 minutes this is fine we'll call this a day in just a second um let's talk about my Resort on planet uh actually now here let's see I won't say Resort let's just talk about let's talk about planet Hoth again yep okay um what was I asking about last time and so now there we go um remind me what you said that you said exactly and so let's check these logs yeah so here you see um oh interesting that doesn't look quite right I'll need to look at why those don't why those are messed up but so you see here where um right so marketing copy yep okay so anyways it's remembering what I said um it's pre-populating um but it's not adding user in so that's interesting I bet append so user and then the response response should include that but it's almost like it's not including it oh I know where I know where where the problem is because if we look at the logs yeah it's not it's not saving it in the log so I need user colon in the logs saved there so when I save it here I need to do um user hey there we go okay um all right but we've got it we've got it working so Marcus remembers everything that we're talking about and this can get very long um like the the the length of your conversation so what I often do is um I'll add something if length of convert station is like greater than and also since Marcus has a memory now we can shorten it up so let's say let's say like 20 um if length of conversation is greater than 20 then um uh let's see uh b equals conversation dot Pop I think that's all you need to do I think it's pop zero um which so all that does is just remove the first index from it but there you have it this technique can be used uh very very simply to give any chat bot a long-term memory and it's brain dead simple um so yeah I think we'll call it a day there you have it this is a marketing bot with a long-term memory and of course you just change the prompt to whatever chatbot you want and it's got a long-term memory there's all sorts of other things you can do built in here you can check out my dolly chatbot which I have a separate function built in where Dolly will generate um uh the dolly bot will generate uh prompts for you anyways that's another video that's another time thanks for watching have a good one