hey everyone David Shapiro here with your daily or nearly daily video um today's topic is going to be transcripts so um as you may or may not be aware I wrote a quick tool um for transcribing or generating chapters from my YouTube videos based on the transcripts now that's useful it's a very particular use case I use it for all of my videos to give them nice clean chapters um but the someone from our Discord server from the cognitive AI lab had a use case a similar but different use case so rather than that rather than taking an unstructured transcript and generating YouTube chapters what he wanted was a tool for a journalist and so what it would do is read an unstructured transcript and get the key pieces of information from it um just like what is the mo what are the most interesting bits from it so I asked for a little bit of clarification as to what they wanted because I'm not a journalist I don't know I don't know what the problems they face so he described the problems that journalists will face with with unstructured transcripts because you know imagine they're conducting an interview with you know just a tape recorder and then they do um automatic speech recognition on that and um you lose a lot of context but also it takes a long time to go through it but we have a tool that can automatically read stuff so first I'll just show you what I already did for my YouTube videos so here's an example of one of one of my YouTube transcripts it is a wall of text this is 90 000 characters with no punctuation this is a nightmare to read um obviously nobody wants to read this um so what I did was and this is our this I already had this um so unfortunately I won't show you the process of writing it but um whoops that's not what I meant so this is the final result um where it's got nice formatting it's got punctuation it's got new lines um and so this is an example of um just automatically taking a transcript and cleaning it up so let me just show you what I already did to do this um and again I already wrote this so I'm not going to rewrite it so first here's the prompt so the prompt just says the following is an unstructured video transcript by David Shapiro obviously you'll change your name for whatever you know whoever you are please rewrite this as a more structured clear essay and so what it does is you just give it a chunk of the transcript and it spits out a clean essay it works really well um go test it yourself if you don't believe me but you I showed you the results um so all that the script does is so prompt clarify transcript um no not the prompt um clarifytranscripts.pi so what this does is it goes through um it does it in batches so it goes through the transcripts folder it checks to see if it's already clarified it and then otherwise it just breaks it into chunks of six thousand um six thousand characters long uh the current DaVinci can handle up to I think 14 to 16 000 characters um but do smaller chunks because one token count and two you don't want so much information that it loses context um another thing is um I probably have the temperature too high so I'll probably turn the temperature down on this because sometimes it'll go off the rails a little bit um but yeah so that's all you need with the instruct series um so what I'm going to do then though is I'm going to adapt this script so I've got it down here so we've got clarified transcripts and then I've got transcript insights so the key thing here is we want a different we want a different result we want to say okay what's the most interesting thing so we're going to do prompt chaining rather than rewriting or summarizing but before we move on I just want to point out that this does this does two things when you say rewrite it as a clean essay it adds punctuation and it adds vertical white space that's the two primary things but it also has Rewritten it to kind of summarize and clear and clarify so it turns an unstructured transcript into something that is absolutely readable that is human readable um because it goes from this like literally like I know that it's probably unreal but it goes from this um to this and you could change the prompt to just say it's unstructured please rewrite it as a more structured clear essay you can say Just Add punctuation and um and new lines right um but what what this has done is it's kind of summarized it'll sorry let me mute my phone mute the phone okay cool um all right so let's go let's close this um actually well yeah that's fine clarify transcripts so we've got transcript insights so what we want to do is we want to we'll add another folder so we'll just say insights and so we'll take anything in the transcripts folder and then we'll generate insights from it and so this will be mostly the same so we'll take chunks and then we'll do um we'll do uh get a list of chunks but instead of instead of um instead of just doing one prompt which is prompt clarify transcripts first we're going to do topic extraction what are the most interesting topics listed and then we're going to say okay write you know write details about this particular Topic in this chunk so I'll show you what I mean um so let's come in here well first we'll do prompt and so instead of clarify transcript we'll do prompt topic extraction dot text and then we'll open this file and so oh sorry I'm not zoomed in everyone's squinting at the screen okay the following is an unstructured video transcript by David Shapiro please rewrite okay so we're going to change these instructions we're going to say um extract the most interesting um let's see extract uh no list um so you have to be really careful with the verb because extract is kind of vague but list tells you I want a list give me a list of topics list the most interesting um topics from this uh transcript and so then we come down here and actually what we'll do is we'll we'll put the transcript just below because using vertical white spaces usually just a little bit cleaner okay so then we'll say list of topics and we'll do a little Dash so that'll tell it I want a list that'll prompt it to give me a list okay so first let's just um so for chunk and chunks we'll say topics equals this and we'll clean this up and we'll do um topic extraction um transcript chunk there we go so that'll just put that in here um let's do print topics and then we will do an exit just because I want to test this um all right so we'll do python what the heck did I name this transcript insights transcript insights okay see if it blows up error communicating oh right I need the logs folder ha for all of you that watch my videos this happens every morning that's the this is this is the this is the folder that I forget to create you know what here's what I'm gonna do I'm gonna I'm gonna go ahead and fix this permanently and add a uh make dirt like check if not here [Music] um yeah I'll do it later no see I'll say I say I'll do it later and then I won't anyways someone else fixed this for me please actually and I can hear someone saying oh ooh no here's what I'm gonna do I'm gonna go to codex um all right I'm gonna have codex write this for me um let's see where is it codex DaVinci okay um so we'll grab this and we'll say uh um all right so we'll give it that here let me I gotta zoom out a little because this is a Long Function Okay so I know I know I know go away okay um rewrite um what is this gpd3 completion um so that it will check if um the if folder gpt3 blogs exists [Music] um and create it if not exists okay this is why I don't use codex is because I give it really clear instructions and then it just makes stuff up that's not what I was asking for quit quit quit yanking me around all right so what I'm going to do is do a little bit of prompt engineering so I'm just go ahead and give me the function and so then right down here there we go is it really that simple okay and then I guess it ran out of tokens um all right so let's copy this in and see if it works if not exists make okay cool man all right so let me come back here and delete gpt3 logs and rerun it yes okay sorry um all right uh Discord channel YouTube channel deep learning gpt2 artificial intelligence natural language models blockchain homomorphic encryption prompt engineering and legal law Okay cool so we have a list of topics for each chunk right so let's go check in here so this is the transcript that we put in and then it it lists the topics Okay cool so we're going to take that that block of text and say given the following topics and transcript so we're basically going to so we've got the topic extraction and so then we will um so let's just copy this um so then we'll say let's see um write detailed notes about the given topics um uh let's see write detail notes about the given topics actually that's fine okay so we'll do um topics here and then we'll say um detailed notes um so basically what we're doing is we're we're breaking it up into two steps so instead of just summarizing we're saying what are the most interesting topics here let's extract that and then we'll go from there and I don't want I don't well yeah let's do it as um as a prompt um topic notes oops topic notes okay so it'll have it will have a list of topics excuse me um and then we will have a list of um list of notes for each topic so then we will have um topics and notes so then we'll have a list of all that so we need to save it this is this is my process I'm just thinking through it okay so instead of so we've got the topics um whoops um okay so then we say get topics and then we'll say um get notes so we'll just copy this and we'll say um topic notes and we'll do we'll keep replace that but then we'll also replace um topics with topics um yep okay so that does that so then we'll have um notes and topics and so then what we'll do is the output um and actually we're not going to save that as uh that because we're not quite done um so but the output so we'll say um info equals so we'll instantiate a dictionary and so we'll say um topics his topics and then notes equals notes so that we're gonna we're gonna keep the whole Monty and actually I think what we'll do is we will um we'll save this out uh yep so let me grab a recent project um what was it I think it was this guy yeah we save we save a log um so but instead of saving it as a log we'll just save it as um as one blob one chunk um okay so we'll save save Json um and then we'll say file path and payload um okay so file path will be and then payload okay cool okay so then we'll save this as um yeah so first we will because I've got a thing called insights um let's make a folder called notes and I might just break this up into multiple steps okay so we'll save it as notes so we'll take the same file name so file path equals um we'll say notes uh yes notes um percent s oh sorry I got to zoom in again everyone's squinting at the screen um and let's see we're going to change the file name from dot text to dot Json so that's fine um okay file path and so we'll do file dot replace dot text to dot Json okay that should be good and then the content or the payload will be the output and instead of essay it needs to be info um okay so it'll be an ordered list of um of these of these guys okay so save not Json there we go save Json and we'll do file path and output okay cool um yes great so as we're going we'll just print info print info so that we can see um yes there we go there we go there we go so it's going to read from the transcripts folder so I've got my my long one the the Beast um cool and so then we'll do python transcript insights was never closed what do you mean I need to close the parentheses hey there we go okay cool um so cooled yep so it's got some notes so this could um this could probably work on any anything um whether it's a technical interview or a personal interview so we'll see what this has um in the in the in the final bit and then my idea is we will take this output Json this the structured notes um and kind of summarize it all together or something I don't know maybe this is it maybe this is maybe this is fine um we'll see so uh chunks of 6000 divided by or ninety ninety thousand divided by chunks of six thousand so that's um 15 if I'm doing my math correctly um because six Thousand Times Ten is sixty thousand and then half again will be ninety thousand so that's 15 iterations um so that's 30 prompts total which is not that much um the Kardashian filter I remember that conversation it's like a gaussian filter but for Kardashians foreign I'll just stare at you awkwardly while I sit my ginger tea at 6 51 in the morning Json is not defined [Music] I deserve that this is what I get for copy pasting all my code all right I won't make you watch this again I'll pause the video and um okay so it worked we've got a list of topics and the notes from those topics so this takes uh it took 90 000 characters and broke it down to less than thirteen thousand characters um so this is just brief shorthand notes and while this was running I had an idea so what you can do is you can look at this and you can figure out like okay here let me add something so we'll do find um new lines and just replace all yeah yeah I know language none okay so we get the notes um so it's a little bit easier to see I'm not going to save it like this because it breaks the Json um but so we've got particular topics and notes so this could be useful for you to look at and say okay well what what kind of thing do we want to summarize or what topic do we want to follow right so looking through this we can say like okay this is clearly a lot about Ai and ethics so let's say we want to do it we want to follow the topic of AI ethics specifically so what I've done is I'm going to take this so we'll start with transcripts again oh and it saved it out to the notes directory um and so then we'll say Okay so let's we'll take the same thing we'll do transcripts and um and actually we don't need that because the output is different um okay so we're going to follow a particular topic so I'll say topic equals AI ethics and so then instead of just doing topic extraction we need a new prompt um so let's go let's open our prompt and so the following is an unstructured video transcript by David Shapiro um let's see uh take detailed notes um from the transcript but focus on this topic and so then we'll do topic and then detailed notes about and we'll do topic here um yes so that should be good um and then we'll save file save as prompt and we'll say topic notes wait no I already have one um we'll say uh let's see detailed notes okay um yes there we go so detailed notes about topic all right so we're gonna follow a topic and we're going to change the name from prompt topic extraction to detailed notes and we're gonna replace the chunk and then we're also going to replace the um topic topic is one of those words that if you look at it for too long it like loses meaning what's that called like where like you say a word like topic topic topic um and then the spelling it just it looks alien or is that just me it doesn't happen that often it used to happen more when I was a kid um where you just say a word and then it just feels weird Okay so topic with topic to follow okay cool and so then we'll say notes equals that and maybe that's all we need because we're gonna we're gonna summarize everything together so then we'll say um output append notes but we're not done yet because we want we want to we want to um summarize that so instead of doing a list actually we'll do output equals that and so then we'll say output plus equals and we'll say new line new line s and um percent notes um there we go and what we'll do is we'll add this back in so that way it'll compress each each section um that should be good all right so then we've got a particular topic to follow and a file name um and once it's done and actually this is probably enough um because then we're going to follow one thread one through line um although well here let's let's just go ahead and save it save file and we'll do um test dot text um so save file and then the content will be the output um yeah that should be fine okay cool and we'll print notes as we go do my new line okay so let's see what it looks like when we follow one particular topic and we're going to be following AI ethics whoops that's the wrong script we need to do follow topic python follow topic that is not a good summary okay so there's there's it's taking bullet points which is okay but I would rather write um those aren't really detailed notes um I guess when I say detailed notes it's it's listing things um what if I say uh let's see what if I just say right detailed notes about topic but focus on this topic write detail notes um as a paragraph the topic um okay well we'll see if this changes anything Apollo topic because there's nothing wrong but if it's shorthand yeah it's just the importance the importance the importance okay foreign so it's really focusing on AI ethics which is good but it's still in a list format which means we're going to need to say okay let's take this whole thing and then write it as one detailed fully coherent narrative so rewrite these notes as like a blog post or you know I'll probably just use the term coherent narrative okay so let's take a look at the final output so this went out to test.text okay so this is exactly how it looks um all right so this is 5 800 characters long so let's jump back over to the playground and see if we can do a little bit of prompt engineering um so let's see the following um are my notes about um AI ethics from a transcript I need to rewrite these notes as a um nice flowing and coherent narrative um okay so then we'll say notes and then we'll come down here and say um flowing coherent narrative and we'll increase the token count so we're only at 1200 tokens right so we've we've we're only using a little over a quarter of our of our available um token count and that's that's going from 90 000 characters down to 1200 tokens which is about uh well how long was this um 6 000 characters um there we go look at this so now we're taking a particular topic from that transcript and we're summarizing that one thing dang dang I think we struck gold okay so what I'm going to do is I'm going to take this prompt and I'm just going to stuff it in at the end so we'll come down here and we'll do notes flowing coherent narrative bam prompt flowing coherent narrative you know what in a couple months someone is going to publish a paper and it's going to be like the let's think through this step by step and they're going to copy my flowing coherent narrative I gotta say I'm a little frustrated with the scientific industry right now where you can write an entire paper on five words let's think through this step by step seven words that is not science that is like basic prompt engineering that took five minutes sorry I'm not salty about this all right prompt flow and coherent narrative um okay so we'll come down here and instead of saving to that's the wrong script instead of saving to follow topic we will do um file name equals uh let's see we'll say um insights and then we'll do um we'll do file name uh actually no we'll do yeah we'll do topic and then we'll do the file name um and then that should be good and so then we'll do um the topic and then we'll do the original file that we're working on but the for the topic we'll do dot replace um a space with an underscore just for nice consistency and that should be good and then we'll do save file and we'll do file name and then the output dot strip because there's going to be extra new lines wrapped around it oh wait no this is just the notes I still need to run this final prompt ha I know what I'm doing I promise okay prompt and then the prompt name was flowing coherent narrative blowing coherent narrative and we're going to replace notes with output and I probably could change that um no whatever and actually here we'll do output equals output dot rep no dot strip I don't know that's fine we'll just do it here save a line of code Okay so um final equals gpt3 completion um oh we actually don't want to remove that that's fine okay we want to maintain the structure and then final that should be good okay so let's clean that up and we'll say um rewrite topical notes um as one blowing narrative and then we'll do save out to file okay so let's run this and then we're done we're just going to test it real quick laughs follow topic come on Hey Okay cool so we should have AI ethics transcript raw boom done okay so we've taken a 90 000 character um Whatchamacallit transcript we've picked one topic and summarized it down to 6600 characters um it's got some stuff that it doesn't actually need um so okay ai ai ethics is very broad if you had an interview with someone and you wanted to ask about like their time at Harvard or something you could ask that uh specifically but still this is this is useful and it's readable that's the key thing is it's readable all right we're going to call this a day um I'm gonna go ahead and do git status get add get commit am done fools and get push you are welcome